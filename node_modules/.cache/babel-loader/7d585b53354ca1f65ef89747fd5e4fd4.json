{"ast":null,"code":"import { jsxs as $6XpKT$jsxs, jsx as $6XpKT$jsx } from \"react/jsx-runtime\";\nimport { forwardRef as $6XpKT$forwardRef, useRef as $6XpKT$useRef, useState as $6XpKT$useState, useEffect as $6XpKT$useEffect, memo as $6XpKT$memo } from \"react\";\nimport \"prop-types\";\n\nfunction $f63eea9d7c5f466f$export$2e2bcd8739ae039(v1, v2) {\n  return String(v1) === String(v2);\n}\n\nfunction $f7a118348608ef0e$export$2e2bcd8739ae039(value, options) {\n  if (Array.isArray(value)) return value.map(v => options.find(o => (0, $f63eea9d7c5f466f$export$2e2bcd8739ae039)(o.value, v))).filter(o => o);\n  return options.find(o => (0, $f63eea9d7c5f466f$export$2e2bcd8739ae039)(o.value, value)) || null;\n}\n\nfunction $ab17a5af9c7227da$export$2e2bcd8739ae039(value) {\n  return Array.isArray(value) ? value : [value];\n}\n\nfunction $fcc1d8b4a4fe77ec$export$2e2bcd8739ae039(newOption, oldOption, multiple) {\n  if (!newOption) return oldOption;\n  if (!multiple) return newOption;\n  if (!oldOption) return (0, $ab17a5af9c7227da$export$2e2bcd8739ae039)(newOption);\n  const nextOption = (0, $ab17a5af9c7227da$export$2e2bcd8739ae039)(oldOption);\n  const newOptionIndex = nextOption.findIndex(o => (0, $f63eea9d7c5f466f$export$2e2bcd8739ae039)(o.value, newOption.value));\n  if (newOptionIndex >= 0) nextOption.splice(newOptionIndex, 1);else nextOption.push(newOption);\n  return nextOption;\n}\n\nfunction $29242e7c542b89e5$export$2e2bcd8739ae039(option, options, placeholder) {\n  if (!option && !placeholder) return options && options.length ? options[0].name || \"\" : \"\";\n  const isMultiple = Array.isArray(option);\n  if (!option && !isMultiple) return \"\";\n  return isMultiple ? option.map(o => o.name).filter(Boolean).join(\", \") : option.name || \"\";\n}\n\nfunction $8f7d71ac34985a60$export$2e2bcd8739ae039(option) {\n  if (!option) return null;\n  if (Array.isArray(option)) return option.filter(Boolean).map(o => o.value);\n  return option.value || null;\n}\n\nfunction $559302edb229d5e8$export$2e2bcd8739ae039(options) {\n  const nextOptions = [];\n  options.forEach(option => {\n    if (option.group) {\n      const group = nextOptions.findIndex(o => o.type === \"group\" && o.name === option.group);\n      if (group >= 0) nextOptions[group].items.push(option);else nextOptions.push({\n        items: [option],\n        type: \"group\",\n        name: option.group\n      });\n    } else nextOptions.push(option);\n  });\n  return nextOptions;\n}\n\nfunction $e2eb089248fa8007$var$search(q, text) {\n  const searchLength = q.length;\n  const textLength = text.length;\n  if (searchLength > textLength) return false;\n  if (text.indexOf(q) >= 0) return true;\n\n  mainLoop: for (let i = 0, j = 0; i < searchLength; i += 1) {\n    const ch = q.charCodeAt(i);\n\n    while (j < textLength) {\n      if (text.charCodeAt(j++) === ch) continue mainLoop;\n    }\n\n    return false;\n  }\n\n  return true;\n}\n\nfunction $e2eb089248fa8007$export$2e2bcd8739ae039(options, query) {\n  return !query.length ? options : options.filter(o => $e2eb089248fa8007$var$search(query.toLowerCase(), `${o.name} ${o.group || \"\"}`.trim().toLowerCase()));\n}\n\nfunction $5b742793c6607960$export$2e2bcd8739ae039(middleware, items, query) {\n  return middleware.filter(Boolean).reduce((data, cb) => cb(data, query), items).map((item, i) => ({ ...item,\n    index: i\n  }));\n}\n\nfunction $ab7b6b8f43adf325$export$2e2bcd8739ae039(options) {\n  let index = 0;\n  return options.map(option => {\n    if (option.type === \"group\") return option.items.map(o => ({ ...o,\n      group: option.name,\n      index: index++\n    }));\n    return { ...option,\n      index: index++\n    };\n  }).flat();\n}\n\nfunction $21775510bb0d6713$export$2e2bcd8739ae039(defaultOptions, getOptions, debounceTime, search) {\n  const [options, setOptions] = (0, $6XpKT$useState)(() => (0, $ab7b6b8f43adf325$export$2e2bcd8739ae039)(defaultOptions));\n  const [fetching, setFetching] = (0, $6XpKT$useState)(false);\n  (0, $6XpKT$useEffect)(() => {\n    let timeout;\n    if (!getOptions) return;\n    timeout = setTimeout(() => {\n      const optionsReq = getOptions(search, options);\n      setFetching(true);\n      Promise.resolve(optionsReq).then(newOptions => setOptions((0, $ab7b6b8f43adf325$export$2e2bcd8739ae039)(newOptions))).finally(() => setFetching(false));\n    }, debounceTime);\n    return () => {\n      clearTimeout(timeout);\n    };\n  }, [search]);\n  (0, $6XpKT$useEffect)(() => {\n    setOptions((0, $ab7b6b8f43adf325$export$2e2bcd8739ae039)(defaultOptions));\n  }, [defaultOptions]);\n  return [options, fetching];\n}\n\nfunction $e86f7a275d5b9934$export$2e2bcd8739ae039(current, dir, options) {\n  const max = options.length - 1;\n  let option = null;\n  let i = -1;\n  let newHighlighted = current;\n\n  while (i++ <= max && (!option || option.disabled)) {\n    newHighlighted = dir === \"down\" ? newHighlighted + 1 : newHighlighted - 1;\n    if (newHighlighted < 0) newHighlighted = max;else if (newHighlighted > max) newHighlighted = 0;\n    option = options[newHighlighted];\n  }\n\n  return newHighlighted;\n}\n\nfunction $8c63ada902e0d18e$export$2e2bcd8739ae039(options, onSelect, ref) {\n  const [highlighted, setHighlighted] = (0, $6XpKT$useState)(-1);\n  return [{\n    onKeyDown: e => {\n      const key = e.key.replace(\"Arrow\", \"\").toLowerCase();\n\n      if (key === \"down\" || key === \"up\") {\n        e.preventDefault();\n        setHighlighted((0, $e86f7a275d5b9934$export$2e2bcd8739ae039)(highlighted, key, options));\n      }\n    },\n    onKeyUp: e => {\n      if (e.key === \"Escape\") {\n        e.preventDefault();\n        ref.current.blur();\n      } else if (e.key === \"Enter\") {\n        e.preventDefault();\n        if (options[highlighted]) onSelect(options[highlighted].value);\n      }\n    }\n  }, highlighted, setHighlighted];\n}\n\nconst $0d0f732c1d5a71da$var$nullCb = () => {};\n\nfunction $0d0f732c1d5a71da$export$2e2bcd8739ae039({\n  options: defaultOptions,\n  defaultValue: defaultValue,\n  value: value,\n  multiple: multiple,\n  search: search,\n  onChange = $0d0f732c1d5a71da$var$nullCb,\n  onFocus = $0d0f732c1d5a71da$var$nullCb,\n  onBlur = $0d0f732c1d5a71da$var$nullCb,\n  closeOnSelect = true,\n  placeholder: placeholder,\n  getOptions: getOptions,\n  filterOptions: filterOptions,\n  useFuzzySearch = true,\n  debounce: debounce\n}) {\n  const ref = (0, $6XpKT$useRef)();\n  const [state, update] = (0, $6XpKT$useState)(() => ({\n    option: null,\n    search: \"\",\n    focus: false\n  }));\n\n  const setState = u => update({ ...state,\n    ...u\n  });\n\n  const [options, fetching] = (0, $21775510bb0d6713$export$2e2bcd8739ae039)(defaultOptions, getOptions, debounce, state.search);\n\n  const onSelect = v => {\n    const newOption = (0, $fcc1d8b4a4fe77ec$export$2e2bcd8739ae039)((0, $f7a118348608ef0e$export$2e2bcd8739ae039)(decodeURIComponent(v), options), state.option, multiple);\n    if (value === undefined) setState({\n      option: newOption\n    });\n    onChange((0, $8f7d71ac34985a60$export$2e2bcd8739ae039)(newOption), newOption);\n    setTimeout(() => {\n      if (ref.current && closeOnSelect) ref.current.blur();\n    }, 0);\n  };\n\n  const [keyHandlers, highlighted, setHighlighted] = (0, $8c63ada902e0d18e$export$2e2bcd8739ae039)(options, onSelect, ref);\n  const middleware = [useFuzzySearch ? (0, $e2eb089248fa8007$export$2e2bcd8739ae039) : null, ...(filterOptions ? filterOptions : [])];\n  const snapshot = { ...state,\n    value: (0, $8f7d71ac34985a60$export$2e2bcd8739ae039)(state.option),\n    fetching: fetching,\n    highlighted: highlighted,\n    options: (0, $559302edb229d5e8$export$2e2bcd8739ae039)((0, $5b742793c6607960$export$2e2bcd8739ae039)(middleware, options, state.search)),\n    displayValue: (0, $29242e7c542b89e5$export$2e2bcd8739ae039)(state.option, options, placeholder)\n  };\n  const valueProps = {\n    tabIndex: \"0\",\n    readOnly: !search,\n    placeholder: placeholder,\n    value: state.focus && search ? state.search : snapshot.displayValue,\n    ref: ref,\n    ...keyHandlers,\n    onFocus: e => {\n      setState({\n        focus: true\n      });\n      onFocus(e);\n    },\n    onBlur: e => {\n      setState({\n        focus: false,\n        search: \"\"\n      });\n      setHighlighted(-1);\n      onBlur(e);\n    },\n    onMouseDown: e => {\n      if (state.focus) {\n        e.preventDefault();\n        ref.current.blur();\n      }\n    },\n    onChange: search ? ({\n      target: target\n    }) => setState({\n      search: target.value\n    }) : null\n  };\n  const optionProps = {\n    tabIndex: \"-1\",\n\n    onMouseDown(e) {\n      e.preventDefault();\n      onSelect(e.currentTarget.value);\n    }\n\n  };\n  (0, $6XpKT$useEffect)(() => {\n    setState({\n      option: (0, $f7a118348608ef0e$export$2e2bcd8739ae039)(value === undefined ? defaultValue : value, options)\n    });\n  }, [value, options]);\n  return [snapshot, valueProps, optionProps];\n}\n\nconst $461fda4bde208857$var$isString = str => typeof str === \"string\";\n\nconst $461fda4bde208857$var$getClassName = (str, className) => $461fda4bde208857$var$isString(className) ? `${className}-${str}` : className[str];\n\nfunction $461fda4bde208857$export$2e2bcd8739ae039(classNames, className) {\n  if ($461fda4bde208857$var$isString(classNames)) return $461fda4bde208857$var$getClassName(classNames, className);\n  return Object.entries(classNames).filter(([cls, display]) => cls && display).map(([cls]) => $461fda4bde208857$var$getClassName(cls, className)).join(\" \");\n}\n\nfunction $9b55b4f5631730e8$var$Option({\n  optionProps: optionProps,\n  highlighted: highlighted,\n  selected: selected,\n  option: option,\n  cls: cls,\n  renderOption: renderOption,\n  disabled: disabled\n}) {\n  const props = { ...optionProps,\n    value: encodeURIComponent(option.value),\n    disabled: disabled\n  };\n  const className = cls({\n    option: true,\n    \"is-selected\": selected,\n    \"is-highlighted\": highlighted\n  });\n  return /*#__PURE__*/(0, $6XpKT$jsxs)(\"li\", {\n    className: cls(\"row\"),\n    role: \"menuitem\",\n    \"data-index\": option.index,\n    children: [renderOption && renderOption(props, option, {\n      selected: selected,\n      highlighted: highlighted\n    }, className), !renderOption && /*#__PURE__*/(0, $6XpKT$jsx)(\"button\", {\n      type: \"button\",\n      className: className,\n      ...props,\n      children: option.name\n    })]\n  });\n}\n\nvar $9b55b4f5631730e8$export$2e2bcd8739ae039 = /*#__PURE__*/(0, $6XpKT$memo)($9b55b4f5631730e8$var$Option);\n\nfunction $b5eecf9f88e2d7ae$export$2e2bcd8739ae039(option, selectedOption) {\n  if (!selectedOption) return false;\n  return Array.isArray(selectedOption) ? selectedOption.findIndex(o => o.value === option.value) >= 0 : selectedOption.value === option.value;\n}\n\nfunction $1b5fcad01c07e709$var$Options(props) {\n  const {\n    options: options,\n    cls: cls,\n    renderOption: renderOption,\n    renderGroupHeader: renderGroupHeader,\n    optionProps: optionProps,\n    snapshot: snapshot,\n    disabled: disabled\n  } = props;\n  return /*#__PURE__*/(0, $6XpKT$jsx)(\"ul\", {\n    className: cls(\"options\"),\n    children: options.map(o => {\n      if (o.type === \"group\") return /*#__PURE__*/(0, $6XpKT$jsx)(\"li\", {\n        role: \"none\",\n        className: cls(\"row\"),\n        children: /*#__PURE__*/(0, $6XpKT$jsxs)(\"div\", {\n          className: cls(\"group\"),\n          children: [/*#__PURE__*/(0, $6XpKT$jsx)(\"div\", {\n            className: cls(\"group-header\"),\n            children: renderGroupHeader ? renderGroupHeader(o.name) : o.name\n          }), /*#__PURE__*/(0, $6XpKT$jsx)($1b5fcad01c07e709$var$Options, { ...props,\n            options: o.items\n          })]\n        })\n      }, o.name);\n      return /*#__PURE__*/(0, $6XpKT$jsx)((0, $9b55b4f5631730e8$export$2e2bcd8739ae039), {\n        option: o,\n        optionProps: optionProps,\n        cls: cls,\n        renderOption: renderOption,\n        selected: (0, $b5eecf9f88e2d7ae$export$2e2bcd8739ae039)(o, snapshot.option),\n        highlighted: snapshot.highlighted === o.index,\n        disabled: o.disabled || disabled\n      }, o.value);\n    })\n  });\n}\n\nvar $1b5fcad01c07e709$export$2e2bcd8739ae039 = /*#__PURE__*/(0, $6XpKT$memo)($1b5fcad01c07e709$var$Options);\nconst $00d3317695af813e$var$SelectSearch = /*#__PURE__*/(0, $6XpKT$forwardRef)(({\n  disabled: disabled,\n  placeholder: placeholder,\n  multiple: multiple,\n  search: search,\n  autoFocus: autoFocus,\n  autoComplete: autoComplete,\n  id: id,\n  closeOnSelect: closeOnSelect,\n  className: className,\n  renderValue: renderValue,\n  renderOption: renderOption,\n  renderGroupHeader: renderGroupHeader,\n  fuzzySearch: fuzzySearch,\n  emptyMessage: emptyMessage,\n  value: value,\n  ...hookProps\n}, ref) => {\n  const selectRef = (0, $6XpKT$useRef)(null);\n\n  const cls = classNames => (0, $461fda4bde208857$export$2e2bcd8739ae039)(classNames, className);\n\n  const [controlledValue, setControlledValue] = (0, $6XpKT$useState)(value);\n  const [snapshot, valueProps, optionProps] = (0, $0d0f732c1d5a71da$export$2e2bcd8739ae039)({\n    value: controlledValue,\n    placeholder: placeholder,\n    multiple: multiple,\n    search: search,\n    closeOnSelect: closeOnSelect && !multiple,\n    useFuzzySearch: fuzzySearch,\n    ...hookProps\n  });\n  const {\n    highlighted: highlighted,\n    value: snapValue,\n    fetching: fetching,\n    focus: focus\n  } = snapshot;\n  const props = { ...valueProps,\n    autoFocus: autoFocus,\n    autoComplete: autoComplete,\n    disabled: disabled\n  };\n  (0, $6XpKT$useEffect)(() => {\n    const {\n      current: current\n    } = selectRef;\n\n    if (current) {\n      const val = Array.isArray(snapValue) ? snapValue[0] : snapValue;\n      const selected = current.querySelector(highlighted > -1 ? `[data-index=\"${highlighted}\"]` : `[value=\"${encodeURIComponent(val)}\"]`);\n\n      if (selected) {\n        const rect = current.getBoundingClientRect();\n        const selectedRect = selected.getBoundingClientRect();\n        current.scrollTop = selected.offsetTop - rect.height / 2 + selectedRect.height / 2;\n      }\n    }\n  }, [snapValue, highlighted, selectRef.current]);\n  (0, $6XpKT$useEffect)(() => setControlledValue(value), [value]);\n  return /*#__PURE__*/(0, $6XpKT$jsxs)(\"div\", {\n    ref: ref,\n    id: id,\n    className: cls({\n      container: true,\n      \"is-multiple\": multiple,\n      \"is-disabled\": disabled,\n      \"is-loading\": fetching,\n      \"has-focus\": focus\n    }),\n    children: [(!multiple || placeholder || search) && /*#__PURE__*/(0, $6XpKT$jsxs)(\"div\", {\n      className: cls(\"value\"),\n      children: [renderValue && renderValue(props, snapshot, cls(\"input\")), !renderValue && /*#__PURE__*/(0, $6XpKT$jsx)(\"input\", { ...props,\n        className: cls(\"input\")\n      })]\n    }), /*#__PURE__*/(0, $6XpKT$jsxs)(\"div\", {\n      className: cls(\"select\"),\n      ref: selectRef,\n      onMouseDown: e => e.preventDefault(),\n      children: [snapshot.options.length > 0 && /*#__PURE__*/(0, $6XpKT$jsx)((0, $1b5fcad01c07e709$export$2e2bcd8739ae039), {\n        options: snapshot.options,\n        optionProps: optionProps,\n        renderOption: renderOption,\n        renderGroupHeader: renderGroupHeader,\n        disabled: disabled,\n        snapshot: snapshot,\n        cls: cls\n      }), !snapshot.options.length && /*#__PURE__*/(0, $6XpKT$jsx)(\"ul\", {\n        className: cls(\"options\"),\n        children: !snapshot.options.length && emptyMessage && /*#__PURE__*/(0, $6XpKT$jsx)(\"li\", {\n          className: cls(\"not-found\"),\n          children: emptyMessage\n        })\n      })]\n    })]\n  });\n});\n$00d3317695af813e$var$SelectSearch.defaultProps = {\n  // Data\n  options: [],\n  fuzzySearch: true,\n  // Interaction´\n  printOptions: \"auto\",\n  closeOnSelect: true,\n  debounce: 250,\n  // Attributes\n  autoComplete: \"on\",\n  // Design\n  className: \"select-search\"\n};\n$00d3317695af813e$var$SelectSearch.displayName = \"SelectSearch\";\nvar $00d3317695af813e$export$2e2bcd8739ae039 = /*#__PURE__*/(0, $6XpKT$memo)($00d3317695af813e$var$SelectSearch);\nvar $cf838c15c8b009ba$export$2e2bcd8739ae039 = (0, $00d3317695af813e$export$2e2bcd8739ae039);\nexport { $cf838c15c8b009ba$export$2e2bcd8739ae039 as default, $0d0f732c1d5a71da$export$2e2bcd8739ae039 as useSelect };","map":null,"metadata":{},"sourceType":"module"}