{"ast":null,"code":"import _classCallCheck from\"/home/sakshi/Downloads/test/Test/Awasar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/sakshi/Downloads/test/Test/Awasar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/home/sakshi/Downloads/test/Test/Awasar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/home/sakshi/Downloads/test/Test/Awasar/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import{Form}from\"react-bootstrap\";import{Fade}from\"react-reveal\";import html2canvas from'html2canvas';import jsPDF from'jspdf';import Select from\"react-select\";import{useRef}from\"react\";import Header from\"../../components/header/Header\";import Footer from\"../../components/footer/Footer\";import GithubRepoCard from\"../../components/githubRepoCard/GithubRepoCard\";import AdmitCard from\"../../containers/education/AdmitCard\";import PublicationCard from\"../../components/publicationsCard/PublicationCard\";import Button from\"../../components/button/Button\";import SelectBox from\"../../components/Select/SelectBox\";import TopButton from\"../../components/topButton/TopButton\";import{cityList,cityListWithLabel,enrollmentPrefix,enrollmentStatic}from\"../../constant\";import{greeting,projectsHeader,publicationsHeader,publications,contactPageData,baseUrl}from\"../../portfolio.js\";import ProjectsData from\"../../shared/opensource/projects.json\";import\"./Projects.css\";import ProjectsImg from\"./ProjectsImg\";var AdmitCardPage=/*#__PURE__*/function(_Component){_inherits(AdmitCardPage,_Component);var _super=_createSuper(AdmitCardPage);function AdmitCardPage(props){var _this;_classCallCheck(this,AdmitCardPage);_this=_super.call(this,props);_this.onChangeCenter=function(selectedOption){_this.setState({center:selectedOption});console.log(\"Option selected:\",selectedOption);};_this.changeHandler=function(e){console.log(e.target.value);_this.setState({selector:e.target.value});};_this.setVisibal=function(event){event.preventDefault();var errors={};if(!_this.state.selector||!_this.state.selector.trim()){errors.selector=\"Mobile Nmuber / Email is required\";}else{delete errors.selector;}if(_this.state.centerRequired&&!_this.state.center){errors.center=\"Please select your Exam Center\";}else{delete errors.center;}var requestOptions={method:'GET',headers:{'Content-Type':'application/json'}};var readyToCall=Object.keys(errors).length;if(!readyToCall){errors={};fetch(\"\".concat(baseUrl,\"enquiry/getEnquiryData/\").concat(_this.state.selector)).then(function(response){return response.json();}).then(function(data){_this.setState({res:data,resStatus:data.statusType,errorValues:{}});errors={};if(data.statusType!=='error'){_this.setState({admitStatus:data.data.center?true:_this.state.center?true:false,buttonText:data.data.center?'Download Your Admit Card':_this.state.center?'Download Your Admit Card':'Get Your Admit Card',centerRequired:data.data.center?false:true});}});}else{_this.setState({errorValues:errors});}};_this.printDocument=function(data){return new Promise(function(resolve){var input=document.getElementById('divToPrint');html2canvas(input,{quality:1,scale:5}).then(function(canvas){var img=new Image();img.src=canvas.toDataURL('image/png');img.onload=function(){var pdf=new jsPDF('l','px','legal',true);pdf.addImage(img,0,0,pdf.internal.pageSize.width,pdf.internal.pageSize.height);pdf.save(\"hallTicket-\".concat(enrollmentPrefix).concat(parseInt(enrollmentStatic)+parseInt(data.res.data.id),\".pdf\"));setTimeout(function(){resolve('resolved');},1000);};});});};_this.state={admitStatus:false,loading:false,center:'',selector:'',res:'',resStatus:'',errorValues:'',buttonText:'Get Your Admit Card',centerRequired:false};_this.searchInput=React.createRef();return _this;}_createClass(AdmitCardPage,[{key:\"asyncPDF\",value:function asyncPDF(event,data){var _this2=this;event.preventDefault();this.setState({buttonText:'Downloading...',admitStatus:false});console.log(data,this.state);this.printDocument(data).then(function(){if(_this2.state.centerRequired){var requestOptions={method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({center:data.center.value,address:data.center.address,examDateTime:data.center.examDateTime})};fetch(\"\".concat(baseUrl,\"enquiry/updateCenter/\").concat(_this2.state.selector),requestOptions).then(function(response){return response.json();}).then(function(data){console.log(data);_this2.setState({buttonText:'Get Your Admit Card',admitStatus:false,centerRequired:false});});}else{_this2.setState({buttonText:'Get Your Admit Card',admitStatus:false,centerRequired:false});}});}},{key:\"render\",value:function render(){var _this3=this;var theme=this.props.theme;return/*#__PURE__*/React.createElement(\"div\",{className:\"projects-main\"},/*#__PURE__*/React.createElement(Header,{theme:theme}),/*#__PURE__*/React.createElement(\"div\",{className:\"basic-projects\"},/*#__PURE__*/React.createElement(Fade,{bottom:true,duration:2000,distance:\"40px\"},/*#__PURE__*/React.createElement(\"div\",{className:\"projects-heading-div\"},/*#__PURE__*/React.createElement(\"div\",{className:\"projects-heading-img-div\"},/*#__PURE__*/React.createElement(ProjectsImg,{theme:theme})),/*#__PURE__*/React.createElement(\"div\",{className:\"projects-heading-text-div\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"projects-heading-text\",style:{color:theme.text}},projectsHeader.title),/*#__PURE__*/React.createElement(\"p\",{className:\"projects-header-detail-text subTitle\",style:{color:theme.secondaryText}},projectsHeader[\"description\"]))))),/*#__PURE__*/React.createElement(\"div\",{className:\"project-button\"},/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\"},/*#__PURE__*/React.createElement(Form.Control,{type:\"text\",className:this.state.selector!==''?\" active\":\"\",onChange:this.changeHandler,value:this.selector}),/*#__PURE__*/React.createElement(Form.Label,null,\"Mobile Number / Email\"),/*#__PURE__*/React.createElement(\"label\",{className:this.state.errorValues.selector||this.state.resStatus==='error'?'invalid-feedback':'hide'},this.state.errorValues.selector?this.state.errorValues.selector:this.state.resStatus==='error'?\"No Record found please try with different Mobile Nmuber / Email is required.\":''),/*#__PURE__*/React.createElement(\"div\",{className:\"form-notch\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-notch-leading\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-notch-middle\",style:{width:\"140px\"}}),/*#__PURE__*/React.createElement(\"div\",{className:\"form-notch-trailing\"}))),this.state.centerRequired&&/*#__PURE__*/React.createElement(Form.Group,{controlId:\"formBasicSelect\"},/*#__PURE__*/React.createElement(Select,{defaultValue:cityListWithLabel[0],label:\"Single select\",options:cityListWithLabel,value:this.state.center,onChange:this.onChangeCenter}),/*#__PURE__*/React.createElement(\"label\",{className:this.state.errorValues.center?'invalid-feedback':'hide'},this.state.errorValues.center)),/*#__PURE__*/React.createElement(\"button\",{className:\"main-button admit-button\",onClick:function onClick(e){return!_this3.state.admitStatus?_this3.setVisibal(e):_this3.asyncPDF(e,_this3.state);},style:{color:theme.body,backgroundColor:theme.text,border:\"solid 1px \".concat(theme.text)}},this.state.buttonText))),/*#__PURE__*/React.createElement(\"div\",{id:\"divToPrint\",className:\"repo-cards-div-main \".concat(!this.state.admitStatus?'hide':'')},/*#__PURE__*/React.createElement(AdmitCard,{theme:theme,contact:contactPageData,logo:greeting.logo_name,data:this.state.res.data,center:this.state.center})),/*#__PURE__*/React.createElement(\"div\",{className:\"project-button \".concat(!this.state.admitStatus?'hide':'')},/*#__PURE__*/React.createElement(\"button\",{className:\"main-button admit-button\",onClick:function onClick(e){return!_this3.state.admitStatus?_this3.setVisibal(e):_this3.asyncPDF(e,_this3.state);},style:{color:theme.body,backgroundColor:theme.text,border:\"solid 1px \".concat(theme.text)}},this.state.buttonText)),/*#__PURE__*/React.createElement(Footer,{theme:this.props.theme,onToggle:this.props.onToggle}),/*#__PURE__*/React.createElement(TopButton,{theme:this.props.theme}));}}]);return AdmitCardPage;}(Component);export default AdmitCardPage;","map":{"version":3,"sources":["/home/sakshi/Downloads/test/Test/Awasar/src/pages/projects/AdmitCard.js"],"names":["React","Component","Form","Fade","html2canvas","jsPDF","Select","useRef","Header","Footer","GithubRepoCard","AdmitCard","PublicationCard","Button","SelectBox","TopButton","cityList","cityListWithLabel","enrollmentPrefix","enrollmentStatic","greeting","projectsHeader","publicationsHeader","publications","contactPageData","baseUrl","ProjectsData","ProjectsImg","AdmitCardPage","props","onChangeCenter","selectedOption","setState","center","console","log","changeHandler","e","target","value","selector","setVisibal","event","preventDefault","errors","state","trim","centerRequired","requestOptions","method","headers","readyToCall","Object","keys","length","fetch","then","response","json","data","res","resStatus","statusType","errorValues","admitStatus","buttonText","printDocument","Promise","resolve","input","document","getElementById","quality","scale","canvas","img","Image","src","toDataURL","onload","pdf","addImage","internal","pageSize","width","height","save","parseInt","id","setTimeout","loading","searchInput","createRef","body","JSON","stringify","address","examDateTime","theme","color","text","title","secondaryText","asyncPDF","backgroundColor","border","logo_name","onToggle"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Form } from \"react-bootstrap\";\nimport { Fade } from \"react-reveal\";\nimport html2canvas from 'html2canvas';\nimport jsPDF from 'jspdf';\nimport Select from \"react-select\";\nimport { useRef } from \"react\";\nimport Header from \"../../components/header/Header\";\nimport Footer from \"../../components/footer/Footer\";\nimport GithubRepoCard from \"../../components/githubRepoCard/GithubRepoCard\";\nimport AdmitCard from \"../../containers/education/AdmitCard\";\nimport PublicationCard from \"../../components/publicationsCard/PublicationCard\";\nimport Button from \"../../components/button/Button\";\nimport SelectBox from \"../../components/Select/SelectBox\";\nimport TopButton from \"../../components/topButton/TopButton\";\nimport {cityList, cityListWithLabel, enrollmentPrefix, enrollmentStatic} from \"../../constant\";\nimport {\n  greeting,\n  projectsHeader,\n  publicationsHeader,\n  publications,\n  contactPageData,\n  baseUrl,\n} from \"../../portfolio.js\";\nimport ProjectsData from \"../../shared/opensource/projects.json\";\nimport \"./Projects.css\";\nimport ProjectsImg from \"./ProjectsImg\";\n\nclass AdmitCardPage extends Component {\nconstructor(props) {\n    super(props);\n    this.state = {\n    admitStatus: false, \n    loading: false, \n    center: '', \n    selector: '',\n    res: '', \n    resStatus:'',\n    errorValues:'',\n    buttonText:'Get Your Admit Card',\n    centerRequired:false\n    };\n    this.searchInput = React.createRef();\n  }\n  \n  onChangeCenter = selectedOption => {\n    this.setState({ center: selectedOption });\n    console.log(`Option selected:`, selectedOption);\n  };\n  changeHandler = (e) => {\n  \tconsole.log(e.target.value);\n  \tthis.setState({ selector: e.target.value });\n  }\n  \nsetVisibal = (event) => {\n\tevent.preventDefault();\n\tlet errors = {};\n\t\n\tif (!this.state.selector || !this.state.selector.trim()) {\n\t  \terrors.selector = \"Mobile Nmuber / Email is required\";\n\t} \n\telse {\n\t   \tdelete errors.selector;\n\t}\n\tif(this.state.centerRequired && !this.state.center){\n\t\terrors.center = \"Please select your Exam Center\";\n\t}else{\n\t\tdelete errors.center;\n\t}\n\tconst requestOptions = {\n\t\tmethod: 'GET',\n\t        headers: { 'Content-Type': 'application/json' }\n\t};\n\tconst readyToCall = Object.keys(errors).length ;\n\tif(!readyToCall){\n\terrors= {};\n\tfetch(`${baseUrl}enquiry/getEnquiryData/${this.state.selector}`)\n\t\t.then(response => response.json())\n\t\t.then(data => {\n\t\t\tthis.setState({ res:data,\n\t\t\tresStatus: data.statusType,\n\t\t\terrorValues : {}\n\t\t\t});\n\t\t\terrors= {};\n\t\t\tif(data.statusType !== 'error'){\n\t\t\t\tthis.setState({admitStatus: data.data.center ? true : this.state.center ? true : false, buttonText:data.data.center ? 'Download Your Admit Card' : this.state.center ? 'Download Your Admit Card' :'Get Your Admit Card', centerRequired: data.data.center ? false : true});\n\t\t\t}\n\t\t});\n\t\t\n\t\t\n\t}else{\n\t\tthis.setState({errorValues: errors})\n\t}\n};\n\n asyncPDF(event, data) {\n event.preventDefault();\n  this.setState({buttonText:'Downloading...', admitStatus: false});\n  console.log(data, this.state);\n  this.printDocument(data).then(()=>{\n  if(this.state.centerRequired){\n  const requestOptions = {\n\t\tmethod: 'PUT',\n\t        headers: { 'Content-Type': 'application/json' },\n\t        body: JSON.stringify({center:data.center.value, address: data.center.address,examDateTime:data.center.examDateTime})\n\t};\n\t\n\tfetch(`${baseUrl}enquiry/updateCenter/${this.state.selector}`,requestOptions)\n\t.then(response => response.json())\n\t.then(data => {console.log(data)\n\t\tthis.setState({buttonText:'Get Your Admit Card', admitStatus: false, centerRequired: false});\n\t});\n\t}else{\n\t\tthis.setState({buttonText:'Get Your Admit Card', admitStatus: false, centerRequired: false});\n\t}\n});\n}\n\n  printDocument = (data) =>{\n  return new Promise(resolve => {\n    const input = document.getElementById('divToPrint');\n    html2canvas(input, {\n                quality: 1,\n                scale: 5}).then(function(canvas) {\n      let img = new Image();\n      img.src = canvas.toDataURL('image/png');\n      img.onload = function () {\n        let pdf = new jsPDF('l', 'px', 'legal', true);\n        pdf.addImage(img, 0, 0, pdf.internal.pageSize.width, pdf.internal.pageSize.height);\n        pdf.save(`hallTicket-${enrollmentPrefix}${parseInt(enrollmentStatic)+parseInt(data.res.data.id)}.pdf`);\n        setTimeout(()=>{\n\t    resolve('resolved');\n\t    },1000);\n      };\n    });\n  });\n  }\n  render() {\n    const theme = this.props.theme;\n    return (\n      <div className=\"projects-main\">\n        <Header theme={theme} />\n        <div className=\"basic-projects\">\n          <Fade bottom duration={2000} distance=\"40px\">\n            <div className=\"projects-heading-div\">\n              <div className=\"projects-heading-img-div\">\n                <ProjectsImg theme={theme} />\n              </div>\n              <div className=\"projects-heading-text-div\">\n                <h1\n                  className=\"projects-heading-text\"\n                  style={{ color: theme.text }}\n                >\n                  {projectsHeader.title}\n                </h1>\n                <p\n                  className=\"projects-header-detail-text subTitle\"\n                  style={{ color: theme.secondaryText }}\n                >\n                  {projectsHeader[\"description\"]}\n                </p>\n              </div>\n            </div>\n          </Fade>\n        </div>\n        \n        <div className=\"project-button\">\n\t\t<form>\n\t\t\t<Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\n\t\t\t\t\n\t\t\t\t<Form.Control type=\"text\" className={\n              this.state.selector !== '' ? \" active\" : \"\"\n            } onChange={this.changeHandler} value={this.selector} />\n\t\t\t\t<Form.Label>Mobile Number / Email</Form.Label>\n\t\t\t\t<label className={this.state.errorValues.selector || this.state.resStatus === 'error' ? 'invalid-feedback': 'hide'}>{this.state.errorValues.selector ? this.state.errorValues.selector : this.state.resStatus === 'error' ? `No Record found please try with different Mobile Nmuber / Email is required.` : '' }</label>\n\t\t\t\t<div className=\"form-notch\">\n\t\t\t\t\t<div className=\"form-notch-leading\"></div>\n\t\t\t\t\t<div className=\"form-notch-middle\" style={{width: \"140px\"}}>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"form-notch-trailing\"></div>\n\t\t\t\t</div>\n\t\t      \t</Form.Group>\t\n\t\t      \t{this.state.centerRequired &&\n\t\t\t<Form.Group controlId=\"formBasicSelect\">\n\t\t\t\t<Select\n\t\t\t\t      defaultValue={cityListWithLabel[0]}\n\t\t\t\t      label=\"Single select\"\n\t\t\t\t      options={cityListWithLabel}\n\t\t\t\t      value={this.state.center}\n\t\t\t\t      onChange={this.onChangeCenter}\n\t\t\t\t    />\n\t\t\t\t    <label className={this.state.errorValues.center ? 'invalid-feedback': 'hide'}>{this.state.errorValues.center}</label>\n\t\t      \t</Form.Group>\n\t\t  \t}\n\t\t\t<button className=\"main-button admit-button\" onClick={(e)=>!this.state.admitStatus ? this.setVisibal(e) : this.asyncPDF(e, this.state)} style={{\n\t\t\t  color: theme.body,\n\t\t\t  backgroundColor: theme.text,\n\t\t\t  border: `solid 1px ${theme.text}`,\n\t\t\t}}>\n\t\t\t{this.state.buttonText} \n\t\t\t</button>\n\t \t</form>\n        </div>\n       \n        <div id=\"divToPrint\" className={`repo-cards-div-main ${(!this.state.admitStatus  ? 'hide' :'')}`}>\n            <AdmitCard theme={theme} contact={contactPageData} logo={greeting.logo_name} data={this.state.res.data} center={this.state.center}/>\n        </div>\n        <div className={`project-button ${(!this.state.admitStatus  ? 'hide' :'')}`}>\n\t\t<button className=\"main-button admit-button\" onClick={(e)=>!this.state.admitStatus ? this.setVisibal(e) : this.asyncPDF(e, this.state)} style={{\n\t\t\t  color: theme.body,\n\t\t\t  backgroundColor: theme.text,\n\t\t\t  border: `solid 1px ${theme.text}`,\n\t\t\t}}>\n\t\t\t{this.state.buttonText} \n\t\t</button>\n        </div>\n        <Footer theme={this.props.theme} onToggle={this.props.onToggle} />\n        <TopButton theme={this.props.theme} />\n      </div>\n    );\n  }\n}\n\nexport default AdmitCardPage;\n"]},"metadata":{},"sourceType":"module"}